<!-- Configuration based on form type -->
<% const isGenre = locals.formFor === 'genre'; %>
<% const entityType = isGenre ? 'Genre' : 'Language';  %>
<% const entityTypeLower = entityType.toLowerCase(); %>

<!-- Dynamic URLs -->
<% const formAction = isGenre ? `/genres/${locals.data.id}/edit?_method=PUT` : `/languages/${locals.data.id}/edit?_method=PUT`; %>
<% const returnUrl = `/admin?redirect=${locals.formFor}s`; %>

<!-- Form data  -->
<% const currentName = locals.data?.name || '' %>
<%const nameError = locals.errors?.name; %>
<%const hasErrors = locals.errors && Object.keys(locals.errors).length > 0; %>

<div class="flex-1 flex items-center justify-center py-8 md:p-4 -mt-10">
  <div class="w-full max-w-lg mx-auto">
    <div
      class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"
    >
      <!-- Header Section -->
      <div class="bg-zinc-50 px-6 py-4 border-b border-zinc-200">
        <h1 class="text-xl font-semibold text-zinc-800 flex items-center">
          <svg
            class="w-5 h-5 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
            ></path>
          </svg>
          Edit
          <%= entityType %>
        </h1>
        <p class="text-zinc-600 text-sm mt-1">
          Update the <%= entityTypeLower %> information below
        </p>
      </div>

      <!-- Form Section -->
      <div class="p-6">
        <form
          id="genre-language-form"
          action="<%= formAction %>"
          method="post"
          class="space-y-6"
          novalidate
          data-return-to="<%= returnUrl %>"
        >
          <!-- Name Field -->
          <div class="space-y-2">
            <label for="name" class="block text-sm font-medium text-gray-700">
              <%= entityType %> Name
              <span class="text-red-500" aria-label="required">*</span>
            </label>
            <div class="relative">
              <input
                type="text"
                id="name"
                name="name"
                value="<%= currentName %>"
                required
                autocomplete="off"
                spellcheck="true"
                class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition-colors duration-200"
                placeholder="Enter <%= entityTypeLower %> name"
                aria-describedby="<%= nameError ? 'name-error' : 'name-help' %>"
                aria-invalid="<%= nameError ? 'true' : 'false' %>"
              />
            </div>

            <p id="name-help" class="text-sm text-gray-500">
              Choose a unique and descriptive name for this <%= entityTypeLower
              %>.
            </p>
          </div>

          <!-- Action Buttons -->
          <div
            class="flex items-center justify-between pt-4 border-t border-gray-200"
          >
            <a
              href="<%= encodeURIComponent(returnUrl) %>"
              class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"
            >
              <svg
                class="w-4 h-4 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
              Cancel
            </a>

            <button
              type="submit"
              class="inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"
            >
              <svg
                class="w-4 h-4 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              Update
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- server errors for JavaScript -->
<script type="application/json" id="server-errors-about-genre-and-language">
  <%- JSON.stringify(locals.errors || {}) %>
</script>

<script src="/scripts/genre-language-form.js"></script>
