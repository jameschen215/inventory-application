<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Book Inventory</title>

    <link rel="stylesheet" href="/styles/build.css" />
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Lucid icons -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/lucide-static@latest/font/lucide.css"
    />

    <!-- Scripts -->
    <script src="/scripts/sidebar.js" defer></script>
    <script src="/scripts/modal.js" defer></script>
  </head>

  <body class="relative">
    <!-- Skip to main content link for keyboard navigation -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-500 focus:text-white focus:rounded"
    >
      Skip to main content
    </a>

    <!-- Sidebar navigation -->
    <aside
      id="sidebar"
      class="fixed top-0 -left-72 md:left-0 h-screen w-72 md:w-auto lg:w-64 border-r border-zinc-200 bg-white text-zinc-950 z-30 transition-transform duration-300 flex flex-col"
      role="navigation"
      aria-label="Main navigation"
    >
      <!-- Brand -->
      <div class="flex items-center h-16 px-5">
        <a
          href="/"
          class="flex items-center gap-2"
          aria-label="Book Inventory App - Home"
        >
          <div class="size-8 border-amber-200 rounded-sm" aria-hidden="true">
            <img src="/images/logo.png" alt="Logo" />
          </div>
          <div class="md:sr-only lg:not-sr-only lg:mt-2.5">
            <span class="text-lg uppercase text-zinc-700">Inv</span
            ><span class="text-lg uppercase text-amber-500">App</span>
          </div>
        </a>
      </div>

      <!-- Nav links -->
      <nav role="navigation" aria-label="Primary navigation">
        <ul class="mt-10 flex flex-col gap-5 px-1">
          <li>
            <a
              href="/"
              class="flex items-center gap-3 <%= currentPath === '/' || currentPath.startsWith('/books') ? 'bg-zinc-100' : '' %> px-4 py-3 rounded-sm hover:bg-zinc-100"
            >
              <span class="inline-block size-6" aria-hidden="true">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-library-icon lucide-library w-full h-full"
                >
                  <path d="m16 6 4 14" />
                  <path d="M12 6v14" />
                  <path d="M8 8v12" />
                  <path d="M4 4v16" />
                </svg>
              </span>
              <span class="text-lg font-light md:sr-only lg:not-sr-only"
                >Books</span
              >
            </a>
          </li>

          <li>
            <a
              href="/authors"
              class="flex items-center gap-3 <%= currentPath.startsWith('/authors') ? 'bg-zinc-100' : '' %> px-4 py-3 rounded-sm hover:bg-zinc-100"
            >
              <span class="inline-block size-6" aria-hidden="true">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-users-icon lucide-users w-full h-full"
                >
                  <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                  <path d="M16 3.128a4 4 0 0 1 0 7.744" />
                  <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                  <circle cx="9" cy="7" r="4" />
                </svg>
              </span>
              <span class="text-lg font-light md:sr-only lg:not-sr-only"
                >Authors</span
              >
            </a>
          </li>
          <li>
            <a
              href="/genres"
              class="flex items-center gap-3 <%= currentPath.startsWith('/genres') ? 'bg-zinc-100' : '' %> px-4 py-3 rounded-sm hover:bg-zinc-100"
            >
              <span class="inline-block size-6" aria-hidden="true">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-shapes-icon lucide-shapes w-full h-full"
                >
                  <path
                    d="M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z"
                  />
                  <rect x="3" y="14" width="7" height="7" rx="1" />
                  <circle cx="17.5" cy="17.5" r="3.5" />
                </svg>
              </span>
              <span class="text-lg font-light md:sr-only lg:not-sr-only"
                >Genres</span
              >
            </a>
          </li>
          <li>
            <a
              href="/languages"
              class="flex items-center gap-3 <%= currentPath.startsWith('/languages') ? 'bg-zinc-100' : '' %> px-4 py-3 rounded-sm hover:bg-zinc-100"
            >
              <span class="inline-block size-6" aria-hidden="true">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-languages-icon lucide-languages w-full h-full"
                >
                  <path d="m5 8 6 6" />
                  <path d="m4 14 6-6 2-3" />
                  <path d="M2 5h12" />
                  <path d="M7 2h1" />
                  <path d="m22 22-5-10-5 10" />
                  <path d="M14 18h6" />
                </svg>
              </span>
              <span class="text-lg font-light md:sr-only lg:not-sr-only"
                >Languages</span
              >
            </a>
          </li>
        </ul>
      </nav>

      <!-- Admin Section -->
      <div class="mt-auto mb-5 px-1">
        <a
          href="/admin"
          class="flex items-center gap-3 px-4 py-3 rounded-sm hover:bg-zinc-100"
          aria-label="Administrator panel <%= locals.isLoggedIn ? '(logged in)' : 'not logged in' %>"
        >
          <% if (locals.isLoggedIn) { %>
          <span class="size-6 inline-block text-green-600" aria-hidden="true">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-shield-user-icon lucide-shield-user"
            >
              <path
                d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
              />
              <path d="M6.376 18.91a6 6 0 0 1 11.249.003" />
              <circle cx="12" cy="11" r="4" />
            </svg>
          </span>
          <% } else { %>
          <span class="size-6 inline-block text-zinc-600" aria-hidden="true">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-shield-question-mark-icon lucide-shield-question-mark"
            >
              <path
                d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
              />
              <path d="M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3" />
              <path d="M12 17h.01" />
            </svg>
          </span>
          <% }; %>
          <span class="text-lg font-light md:sr-only lg:not-sr-only"
            >Administrator</span
          >
        </a>
      </div>
    </aside>

    <!-- Main content area -->
    <main
      id="main"
      class="min-h-screen absolute top-0 left-0 md:left-16 lg:left-64 w-full md:w-[calc(100%-64px)] lg:w-[calc(100%-256px)] flex-1 flex flex-col text-zinc-950 transition-transform duration-300 bg-white"
      role="main"
    >
      <!-- Header -->
      <%- include('partials/header') %>

      <!-- Main content -->
      <div
        class="w-full mt-16 md:mb-10 flex-1 flex flex-col p-6 bg-zinc-100"
        id="main-content"
      >
        <!-- Page content -->
        <%- body %>
      </div>

      <%- include('partials/footer') %>
    </main>

    <%- include('partials/modal') %>

    <!-- Data for JavaScript -->
    <!-- Form mode for JavaScript -->
    <script type="application/json" id="form-mode">
      <%- JSON.stringify(locals.isEditMode) %>
    </script>

    <!-- Safe data storage for JavaScript -->
    <script type="application/json" id="original-data">
      <%- JSON.stringify(locals.data || {}) %>
    </script>

    <!-- Form errors for JavaScript -->
    <script type="application/json" id="server-errors">
      <%- JSON.stringify(locals.errors || {}) %>
    </script>

    <!-- cancelPath for JavaScript -->
    <script type="application/json" id="cancel-path">
      <%- JSON.stringify(locals.cancelPath || {}) %>
    </script>
  </body>
</html>
